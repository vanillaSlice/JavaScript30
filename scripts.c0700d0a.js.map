{"version":3,"sources":["01 - JavaScript Drum Kit/scripts/index.js"],"names":["modalElement","document","querySelector","modalOkBtn","soundElements","querySelectorAll","keyElements","soundsEnabled","enableSounds","forEach","sound","volume","play","then","pause","currentTime","handleOkClick","remove","playSound","keyCode","key","classList","add","handleKeyDown","e","handleKeyPress","preventDefault","stopPropagation","dataset","handleTransitionEnd","propertyName","handleSoundEnd","addEventListener","window"],"mappings":";AAMA,IAAMA,EAAeC,SAASC,cAAc,aACtCC,EAAaF,SAASC,cAAc,gBACpCE,EAAgBH,SAASI,iBAAiB,aAC1CC,EAAcL,SAASI,iBAAiB,WAM1CE,GAAgB,EAMpB,SAASC,IACHD,GAIJH,EAAcK,QAAQ,SAACC,GACrBA,EAAMC,OAAS,EACfD,EAAME,OAAOC,KAAK,WAChBH,EAAMI,QACNJ,EAAMK,YAAc,EACpBL,EAAMC,OAAS,EACfJ,GAAgB,MAKtB,SAASS,IACPR,IACAR,EAAaiB,SAGf,SAASC,EAAUC,GACb,GAACZ,EAAD,CAIEG,IAAAA,EAAQT,SAASC,cAAqCiB,uBAAAA,OAAAA,EAA5D,OACMC,EAAMnB,SAASC,cAAmCiB,qBAAAA,OAAAA,EAAxD,OAEKT,GAAUU,IAIfV,EAAMK,YAAc,EACpBL,EAAME,OACNQ,EAAIC,UAAUC,IAAI,kBAGpB,SAASC,EAAcC,GACrBN,EAAUM,EAAEL,SAGd,SAASM,EAAeD,GACtBA,EAAEE,iBACFF,EAAEG,kBACFT,EAAU,KAAKU,QAAQR,KAGzB,SAASS,EAAoBL,GACJ,qBAAnBA,EAAEM,cAIDT,KAAAA,UAAUJ,OAAO,gBAGxB,SAASc,IACK9B,SAASC,cAAmC,qBAAA,OAAA,KAAK0B,QAAQR,IAArE,OACIC,UAAUJ,OAAO,gBAOvBd,EAAW6B,iBAAiB,QAAShB,GACrCiB,OAAOD,iBAAiB,UAAWT,GACnCjB,EAAYG,QAAQ,SAAAW,GAAOA,OAAAA,EAAIY,iBAAiB,YAAaP,GAAgB,KAC7EnB,EAAYG,QAAQ,SAAAW,GAAOA,OAAAA,EAAIY,iBAAiB,aAAcP,GAAgB,KAC9EnB,EAAYG,QAAQ,SAAAW,GAAOA,OAAAA,EAAIY,iBAAiB,gBAAiBH,KACjEzB,EAAcK,QAAQ,SAAAC,GAASA,OAAAA,EAAMsB,iBAAiB,QAASD","file":"scripts.c0700d0a.js","sourceRoot":"../src","sourcesContent":["/* eslint-disable no-param-reassign */\n\n/*\n * Elements\n */\n\nconst modalElement = document.querySelector('.js-modal');\nconst modalOkBtn = document.querySelector('.js-modal-ok');\nconst soundElements = document.querySelectorAll('.js-audio');\nconst keyElements = document.querySelectorAll('.js-key');\n\n/*\n * Variables\n */\n\nlet soundsEnabled = false;\n\n/*\n * Functions\n */\n\nfunction enableSounds() {\n  if (soundsEnabled) {\n    return;\n  }\n\n  soundElements.forEach((sound) => {\n    sound.volume = 0;\n    sound.play().then(() => {\n      sound.pause();\n      sound.currentTime = 0;\n      sound.volume = 1;\n      soundsEnabled = true;\n    });\n  });\n}\n\nfunction handleOkClick() {\n  enableSounds();\n  modalElement.remove();\n}\n\nfunction playSound(keyCode) {\n  if (!soundsEnabled) {\n    return;\n  }\n\n  const sound = document.querySelector(`.js-audio[data-key=\"${keyCode}\"]`);\n  const key = document.querySelector(`.js-key[data-key=\"${keyCode}\"]`);\n\n  if (!sound || !key) {\n    return;\n  }\n\n  sound.currentTime = 0;\n  sound.play();\n  key.classList.add('key--playing');\n}\n\nfunction handleKeyDown(e) {\n  playSound(e.keyCode);\n}\n\nfunction handleKeyPress(e) {\n  e.preventDefault();\n  e.stopPropagation();\n  playSound(this.dataset.key);\n}\n\nfunction handleTransitionEnd(e) {\n  if (e.propertyName !== 'background-color') {\n    return;\n  }\n\n  this.classList.remove('key--playing');\n}\n\nfunction handleSoundEnd() {\n  const key = document.querySelector(`.js-key[data-key=\"${this.dataset.key}\"]`);\n  key.classList.remove('key--playing');\n}\n\n/*\n * Initialise\n */\n\nmodalOkBtn.addEventListener('click', handleOkClick);\nwindow.addEventListener('keydown', handleKeyDown);\nkeyElements.forEach(key => key.addEventListener('mousedown', handleKeyPress, true));\nkeyElements.forEach(key => key.addEventListener('touchstart', handleKeyPress, true));\nkeyElements.forEach(key => key.addEventListener('transitionend', handleTransitionEnd));\nsoundElements.forEach(sound => sound.addEventListener('ended', handleSoundEnd));\n"]}